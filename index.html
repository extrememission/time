<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap" rel="stylesheet">
    <title>SHQ Time</title>
    <style>
        /* Full-screen background for the page */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
            margin: 0; /* Remove default margin */
            font-family: 'Black Ops One', sans-serif;
            background-color: black;
            color: #0a3e1e;
            overflow: hidden;
            position: relative;
            text-align: center;
        }

        /* Center the time container using Flexbox */
        #time-container {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 40%; /* Adjust to center vertically */
            left: 50%; /* Center horizontally */
            transform: translate(-50%, -50%); /* Offset by 50% of its own size */
            white-space: nowrap; /* Prevent wrapping */
            font-size: 15vw; /* Set the font size dynamically based on viewport width */
        }

        #date-container {
            position: absolute;
            top: 50%; /* Reduced distance between time and date */
            left: 50%;
            transform: translateX(-50%);
            font-size: 5vw; /* Smaller font for the date */
            letter-spacing: 0.05em;
        }

        h1 {
            margin: 0;
            line-height: 1;
            letter-spacing: 0.1em;
        }

        /* Blinking colon animation */
        .blink {
            animation: blink-animation 1s steps(1) infinite;
        }

        @keyframes blink-animation {
            50% {
                visibility: hidden;
            }
        }

        /* Limit the size of the text to avoid overflow */
        @media (max-width: 600px) {
            #time-container {
                font-size: 20vw; /* Adjust font size for very small screens */
            }
            #date-container {
                font-size: 8vw;
            }
        }

        @media (min-width: 600px) and (max-width: 1024px) {
            #time-container {
                font-size: 12vw; /* Adjust font size for medium screens */
            }
            #date-container {
                font-size: 6vw;
            }
        }

        @media (min-width: 1024px) {
            #time-container {
                font-size: 10vw; /* Full size for larger screens */
            }
            #date-container {
                font-size: 4vw;
            }
        }
    </style>
</head>
<body>

    <!-- Time Container -->
    <div id="time-container">
        <h1>
            <span id="hours"></span><span class="blink">:</span><span id="minutes"></span>
        </h1>
    </div>

    <!-- Date Container -->
    <div id="date-container">
        <span id="date"></span>
    </div>

    <script>
        // Function to update the time
        function updateTime() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');

            // Convert to 12-hour format, and ensure 0 becomes 12
            hours = hours % 12 || 12;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;

            // Update the date (e.g., "November 27, 2024")
            const date = now.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('date').textContent = date;
        }

        // Initial update of time and date
        updateTime();

        // Update time every 500ms to keep it real-time
        setInterval(updateTime, 500);
    </script>

    <!-- Inline Service Worker Script -->
    <script>
        if ('serviceWorker' in navigator) {
            // Create a Blob to represent the service worker script
            const serviceWorkerScript = `
                self.addEventListener('install', (event) => {
                    console.log('Service Worker installed');
                    event.waitUntil(
                        caches.open('my-cache').then((cache) => {
                            return cache.addAll([
                                '/', // Cache the root (index.html)
                                '/styles.css', // Add any assets like CSS
                                '/scripts.js', // Include any other JS files if needed
                            ]);
                        })
                    );
                });

                self.addEventListener('fetch', (event) => {
                    event.respondWith(
                        caches.match(event.request).then((cachedResponse) => {
                            return cachedResponse || fetch(event.request);
                        })
                    );
                });
            `;
            
            // Create a Blob object for the script
            const blob = new Blob([serviceWorkerScript], { type: 'application/javascript' });

            // Create a URL for the Blob and register the service worker from this URL
            const serviceWorkerURL = URL.createObjectURL(blob);

            // Register the service worker
            navigator.serviceWorker.register(serviceWorkerURL)
                .then(registration => {
                    console.log('Service Worker registered with the Blob URL:', registration.scope);
                })
                .catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
        }
    </script>
</body>
</html>
